name: MERTT Bot Tetikleyici (Otomatik)

on:
  schedule:
    # Hafta içi (Pzt-Cum), 15 dakikada bir çalış
    - cron: '*/15 7-15 * * 1-5'
  workflow_dispatch: # Elle çalıştırma butonu

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
      - name: Depoyu Çek (Kodları Al)
        uses: actions/checkout@v3

      - name: Python Kurulumu
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Kütüphaneleri Yükle (Tam Liste)
        # BURASI DEĞİŞTİ: Artık tek tek yazmıyoruz, dosyadan okuyor.
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Botu Başlat
        env:
          # Şifreleri kasadan al
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.CHAT_ID }}
        run: python otomatik_bot.py
